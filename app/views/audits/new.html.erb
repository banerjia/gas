<%= form_for audit do |f| -%>
<div class="container">
	<div class="row">	
		<div class="col-md-3 col-sm-12 col-xs-12">
		<%= f.fields_for :store do |sf| -%>
			<%= sf.object.full_name -%>
			<address><%= sf.object.address -%></address>
			<%= sf.label :store_number -%>
			<%= sf.text_field :store_number -%>
		<%- end -%>
		</div>
		<div class="col-md-9 col-sm-12 col-xs-12">
				<%- metrics.each_with_index do |m,i| -%>
					<%= f.fields_for :audit_metrics, f.object.audit_metrics.build do |am| -%>				
						<div class="row" data-ng-controller="AuditMetricEntry">
							<div style="display:none">
								<%= am.hidden_field :metric_id, {value: m[:id]} -%>
							</div>
							<div class="col-md-6 col-sm-12 col-xs-12">
								<p data-ng-mode>
									<%= m[:title] -%>
									<blockquote>
										<%= m[:description] -%>
									</blockquote>
								</p>
							</div>
							<div class="col-md-3 col-sm-12 col-xs-12">
								<%- if m[:template].present? -%>
									<%= render m[:template], locals: {f: am, metric: m} -%>
								<%- else -%>
									<span>
										<input type="radio" name="response_for_<%= i -%>" id="response_<%= i -%>_yes" data-ng-click = "points = <%= m[:points] -%> "/>
										<label for="response_<%= i -%>_yes">Yes</label>
									</span>
									<span>
										<input type="radio" name="response_for_<%= i -%>" id="response_<%= i -%>_no" data-ng-click = "points = " />
										<label for="response_<%= i -%>_no">No</label>
									</span>
								<%- end -%>
							</div>
							<div class="col-md-3 col-sm-12 col-xs-12">
								<span>{{points}}</span>
							</div>
						</div>
					<%- end -%>
				<%- end -%>
			</div>
		</div>
	</div>
</div>
<%- end -%>

<%- content_for :page_js do -%>

<%= javascript_include_tag "angular.min.js", :cache => true -%>

<script type="text/javascript">
	angular.module('GAS', [])
	.controller('AuditMetricEntry',function($scope) {});
</script>
	
<%- end -%>