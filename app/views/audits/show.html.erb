<%- content_for :head do -%>
	<%= stylesheet_link_tag :table -%>
	<style type="text/css" media="screen">	
		div.entry_row {
			background-color:transparent
			border: none;
			margin: 0;
			padding: 0
		}
		div.entry_label, div.entry_value{
			display: block;
			float: none;
			margin: 0;
			padding: 0.3em 0.5em;
			width:auto
		}
		div.entry_label {
			background-color: #5f6b61;
			border: 2px solid #ccc; 
			border-left:none; 
			border-right: none;
			color: #fff;
			font-weight: bold;
			text-transform: uppercase
		}
		div.entry_row { margin-bottom: 1em }
		table.listing td { vertical-align: top}
		table.listing tr.category_heading td[colspan] { 
			background-color: #FEF1B5;
			border-bottom: 2px solid #CCC;
			border-top: 2px solid #CCC;
			font-weight: bold; 
			text-align: left;
			text-transform: uppercase
		}
	</style>
<%- end -%>
<%- content_for :left_column do -%>
	<h2>Audit Overview</h2>
	<div class="entry_row">
		<div class="entry_label">
			Audit Date
		</div>
		<div class="entry_value">
			<%= @audit[:created_at].strftime("%b %d, %Y") -%>
		</div>
	</div>
	<div class="entry_row">
		<div class="entry_label">
			Auditor
		</div>
		<div class="entry_value">
			<%= @audit[:auditor_name] -%>
		</div>
	</div>
	<div class="entry_row">
		<div class="entry_label">
			Score
		</div>
		<div class="entry_value">
			<%= @audit[:score] -%>
		</div>
	</div>
	<%- if @audit.comments -%>
	<div class="entry_row">
		<div class="entry_label">
			Comments
		</div>
		<div class="entry_value">
			<%=  @audit.comments -%>
		</div>
	</div>
	<%- end -%>
	<div class="entry_row">
		<div class="entry_label">
			Score Legend
		</div>
		<div class="entry_value">
			<dl>
				<dt>Score</dt>
				<dd>Something</dd
				<dt>23</dt>
				<dd>Twenty three</dd>
			</dl>
		</div>
	</div>
<%- end -%>

<table class="listing">
	<thead>
		<tr>
			<th scope="col">Description</th>
			<th scope="col">Score</th>
		</tr>
	</thead>
	<tbody>
<ul>
<%- 
	last_category = nil
	@audit_metrics.each do |audit_metric| 
		row_class = cycle('regular','alternate')
		if last_category != audit_metric[:category].strip
			last_category = audit_metric[:category].strip
-%>
			<tr class="category_heading">
				<td colspan="2"><%= last_category -%></td>
			</tr>
		<%- end -%>
		<tr class="<%=row_class -%>">
			<td><%= audit_metric[:title] -%><br/><%= audit_metric[:description] -%></td>
			<td><%= audit_metric[:point_value] -%></td>
		</tr>
<%- end -%>
	</tbody>
</table>
