<div class="toolbar">
	<%= link_to "Edit", edit_store_order_path(@store, @order) -%>
</div>
<div id="order_basics">
	<div class="entry_row">
		<div class="entry_label">
			<strong>Store</strong>
		</div>
		<div class="entry_value">
			<%= @store[:name] -%><br/>
			<%= @store.address -%>			
		</div>
	</div>
	<div class="entry_row">
		<div class="entry_label">
			Invoice
		</div>
		<div class="entry_value">
			<%= !@order[:invoice_number].blank? ? @order[:invoice_number] : raw("&nbsp;") -%>
		</div>
	</div>
	<div class="entry_row">
		<div class="entry_label">
			Route
		</div>
		<div class="entry_value">
			<%= !@order[:route_number].blank? ? @order[:route_number] : raw("&nbsp;") -%>
		</div>
	</div>
	<div class="entry_row">
		<div class="entry_label">
			Deliver By
		</div>
		<div class="entry_value">
			<%= !@order[:delivery_date].blank? ? @order[:delivery_date] : raw("&nbsp;") -%>
		</div>
	</div>
	<div class="entry_row">
		<div class="entry_label">
			Amount
		</div>
		<div class="entry_value">
			<%= number_to_currency(@order[:invoice_amount]) -%>
		</div>
	</div>
	<div class="entry_row">
		<div class="entry_label">
			Status
		</div>
		<div class="entry_value">
			<%= @order[:fulfilled]? "Order fulfilled" : "Awaiting Delivery" -%>
		</div>
	</div>
</div>

<div id="product_listing">
	<table id="products" class="listing">
		<thead>
			<tr>
				<th>Product</th>
				<th>Quantity</th>
			</tr>
		</thead>
		<% @product_categories.each do |category| -%>
			<tbody>
				<tr>
					<td colspan="2" class="category_heading"><%= category[:name] -%></td>
				</tr>
			
				<% @products_by_category["category_#{category[:id]}"].each do |product_order| -%>
				<tr>
					<td><%= product_order.product[:name] -%></td>
					<td><%= product_order[:quantity] -%></td>
				</tr>
				<%- end -%>
			</tbody>
		<%- end -%>
	</table>
</div>
<div class="spacer"></div>

<% content_for :head do -%>
<style type="text/css" media="screen">
	div#product_listing{
		border: 2px solid #ddd;
		margin-left: 47%;
		margin-right: 0;
		width: auto;
	}
	table#products {width:100%}
	table#products input[type=text] { text-align: right; width: 30px }
	div#order_basics{
		border: 2px solid #ddd;
		float:left;
		margin-left: 0;
		width: 45%;
	}
	
	div.buttons{
		background-color: #eee;
		border: 2px solid #ddd;
		display: block;
	}
</style>	
<% end -%>

<%- content_for :head do -%>
	<%= stylesheet_link_tag :forms -%>
	<%= stylesheet_link_tag :table -%>
<%- end -%>
